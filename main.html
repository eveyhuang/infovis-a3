
<!DOCTYPE html>
<html>
    <meta charset="utf-8">
    <title>Map with D3.js!</title> 
    <!-- Load d3.js -->
    <script src="https://d3js.org/d3.v6.js"></script>
    <script src="https://unpkg.com/topojson@3.0.2/dist/topojson.min.js"></script>  
    <!-- Create a div where the graph will take place -->
    <body>
        <h1>hello world</h1>
        <div id="my_dataviz"></div>
    </body>
    
</html>

<style>
    svg {
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    }
    .country {
    fill: #ccc;
    stroke: #999;
    }
</style>

<script>
    
    const width = 900;
    const height = 600;

    const svg = d3.select('body').append('svg').attr('width', width).attr('height', height);

    const projection = d3.geoMercator().scale(140)
        .translate([width / 2, height / 1.4]);
    const path = d3.geoPath(projection);

    const g = svg.append('g');
    let SEcountries = ['Afghanistan','Bangladesh', 'Bhutan', 'India','Maldives', 'Nepal','Pakistan', 'Sri Lanka']
   
    d3.json("https://raw.githubusercontent.com/holtzy/D3-graph-gallery/master/DATA/world.geojson").then( function(data){

    // Filter data
    data.features = data.features.filter(d => {return SEcountries.includes(d.properties.name)})
    console.log(data.features);
    // Draw the map
    svg.append("g")
        .selectAll("path")
        .data(data.features)
        .enter().append('path')
            .attr('class', 'country')
                .attr('d', path)
                    .style("stroke", "black")
                        .style("stroke-opacity", .2);
    
    let labels = g
        .selectAll("text")
        .data(data.features)
        .enter()
        .append("text")
        .text(function(d) {
            console.log(d.properties.name)
            return d.properties.name;
        })
        .style("stroke","#908e8e")
        .style("font-size","10px")
        .attr("dx", function (d) {
            return "0.3em";})
        .attr("dy", function (d) {
            return "0.35em";
        })
    })

   
</script>
